!function t(e,i,a){function r(s,h){if(!i[s]){if(!e[s]){var o="function"==typeof require&&require;if(!h&&o)return o(s,!0);if(n)return n(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var f=i[s]={exports:{}};e[s][0].call(f.exports,function(t){var i=e[s][1][t];return r(i?i:t)},f,f.exports,t,e,i,a)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<a.length;s++)r(a[s]);return r}({1:[function(t,e){e.exports=window.Note=t("./dev/noteFactory")},{"./dev/noteFactory":5}],2:[function(t,e){e.exports={"8bit":function(t,e,i){return i.vol=100,Math.sin(t*e)},piano:function(t,e,i){return i.vol/1.5*(sin(t*e)+.3*sin(2*t*e)+.2*sin(3*t*e))}}},{}],3:[function(t,e){e.exports=function(){var t=Math.PI,e=(Math.sin,Math.cos,Math.tan,Math.cot,Math.pow,Math.sqrt,Math.abs,"{{riffwave}}"),i="{{soundEffect}}",a="{{weak}}",r="{{sampleRate}}",n="{{bitsPerSample}}",s="{{blockAlign}}",h="{{numChannels}}",o="{{filterByte}}",d=function(e,n){for(var s,h,o=100,d=2*e*t/r,f=0,u={vol:o,f:e,T:e*r},c=new Uint8Array(n);f++<=n;)s=Math.round(i(d,f,u)),h=s,c[2*f]=s,c[2*f+1]=h,u.vol*=a;return c};onmessage=function(t){var i=t.data.f,a=t.data.note,f=t.data.len,u=(f||3)*r,c=d(i,u),l=new e;l.header.sampleRate=r,l.header.bitsPerSample=n,l.header.blockAlign=s,l.header.numChannels=h,l.header.filterByte=o,l.header.size=u,l.Make(c,function(t,e){postMessage({blob:t,url:e,len:f,note:a})})}}},{}],4:[function(t,e){var i=["C","#C","D","#D","E","F","#F","G","#G","A","#A","B"],a=function(t,e){var i,a,r=!1;e[e.length-1]===!0&&(r=!0),i=r?e[0]:{};for(var n=+r,s=e.length-r;s>n;n++)if(a=e[n],"object"==typeof a)for(var h in t?a:e[0])e[n].hasOwnProperty(h)&&(i[h]=a[h]);return i},r={Worker:function(){var t,e,i,a,r;return t=/function[^(]*\([^)]*\)\s*\{([\s\S]*)\}/,e=window.URL||window.webkitURL,i={type:"text/javascript; charset=utf-8"},function(n,s){var h=n.toString();for(var o in s)h=h.replace('"{{'+o+'}}"',s[o]);return a=h.match(t)[1],r=e.createObjectURL(new Blob([a],i)),new Worker(r)}}(),parse:function(){return a(0,arguments)},merge:function(){return a(1,arguments)},list:i,getFrequency:function(t,e){return s*Math.pow(n,r.translate(t,e)-h)},translate:function(t){var e,a;if("string"==typeof t){var n=r.parseNote(t);e=n[0],a=n[1];var s=i.indexOf(e);if(0>=s)throw"translate note: "+e+" error";return 12*a+s}if("number"==typeof t)return e=t%12,a=t/12|0,i[e]+a;throw"translate note: "+t+" error"},parseNote:function(t){var e,i=/(#?[A-Z])([\d])/;if(e=i.exec(t),!e)throw"input error : "+$.list;return[e[1],e[2]]}},n=Math.pow(2,1/12)||1.06,s=440,h=r.translate("A",4);e.exports=r},{}],5:[function(t,e){var i=t("./kit"),a=t("./factoryContent"),r=t("./riffwave"),n=function(t,e){return t+"_"+e},s=function(t){var e=this;this.config=i.parse({soundEffect:function(t,e,i){return i.vol*Math.sin(t*e)},duration:3,weak:.99985,sampleRate:44100,bitsPerSample:16,blockAlign:2,numChannels:2,filterByte:16},t),this._cache={},this._listener={},this.worker=i.Worker(a,{soundEffect:this.config.soundEffect.toString(),weak:this.config.weak,riffwave:r.toString(),sampleRate:this.config.sampleRate,bitsPerSample:this.config.bitsPerSample,blockAlign:this.config.blockAlign,numChannels:this.config.numChannels,filterByte:this.config.filterByte}),this.worker.onmessage=function(t){var i=t.data.note,a=t.data.len,r=t.data.url;e.cache(i,a,r),e._pub(i,a,r)}};s.prototype.get=function(t,e,i){i=i||this.config.duration;var a=this.cache[t];return a?void e(a):(this.build(t,i),void this._sub(t,i,e))},s.prototype.cache=function(t,e,i){var a=n(t,e);return i?this._cache[a]=i:this._cache[a]},s.prototype.build=function(t,e){var a=i.parseNote(t),r=i.getFrequency(a[0],a[1]);this.worker.postMessage({f:r,note:t,len:e})},s.prototype._sub=function(t,e,i){var a=n(t,e);this._listener[a]||(this._listener[a]=[]),this._listener[a].push(i)},s.prototype._pub=function(t,e,i){var a=n(t,e),r=this._listener[a]||[];this._listener[a]=[];var s={noteFullName:t,duration:e};r.forEach(function(t){t(i,s)})},s.translate=i.translate,s.effect=t("./effect"),s.noteList=i.list,e.exports=s},{"./effect":2,"./factoryContent":3,"./kit":4,"./riffwave":6}],6:[function(t,e){function i(t){function e(t,e){for(var i=0,a=[];t--;)a.push(e>>8*i++&255);return a}this.mode=!!t,this.bitAdd=function(t){return this.dataBit+=t,t},this.header={RIFF_ID:[82,73,70,70],chunkSize:0,WAVE_ID:[87,65,86,69],FMT_ID:[102,109,116,32],filterByte:16,formatType:1,numChannels:2,sampleRate:44100,byteRate:0,blockAlign:0,bitsPerSample:8,fact_ID:[100,97,116,97],size:4},this.Make=function(t,i){var a=16==this.header.bitsPerSample?4:3;if(this.header.blockAlign=this.header.numChannels*this.header.bitsPerSample>>a,this.header.byteRate=this.header.blockAlign*this.header.sampleRate,this.header.size=t.length*(this.header.bitsPerSample>>a),this.header.chunkSize=36+this.header.size,this.dataBit=0,this.data=new Uint8Array(this.header.size*(a-2)+44),this.data.set(this.header.RIFF_ID,this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.chunkSize),this.dataBit),this.bitAdd(4),this.data.set(this.header.WAVE_ID,this.dataBit),this.bitAdd(4),this.data.set(this.header.FMT_ID,this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.filterByte),this.dataBit),this.bitAdd(4),this.data.set(e(2,this.header.formatType),this.dataBit),this.bitAdd(2),this.data.set(e(2,this.header.numChannels),this.dataBit),this.bitAdd(2),this.data.set(e(4,this.header.sampleRate),this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.byteRate),this.dataBit),this.bitAdd(4),this.data.set(e(2,this.header.blockAlign),this.dataBit),this.bitAdd(2),this.data.set(e(2,this.header.bitsPerSample),this.dataBit),this.bitAdd(2),this.data.set(this.header.fact_ID,this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.size),this.dataBit),this.bitAdd(4),4==a)for(var r=0,n=t.length;n>r;r++)this.data.set(e(2,t[r]).reverse(),this.dataBit),this.bitAdd(2);else this.data.set(t,this.dataBit);var s=new Blob([].concat(this.data),{type:"audio/wav"}),h=URL.createObjectURL(s);i&&i(s,h)}}window&&(window.RIFFWAVE=i),e.exports=i},{}]},{},[1]);