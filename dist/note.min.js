!function t(e,i,a){function n(s,o){if(!i[s]){if(!e[s]){var h="function"==typeof require&&require;if(!o&&h)return h(s,!0);if(r)return r(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return n(i?i:t)},u,u.exports,t,e,i,a)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<a.length;s++)n(a[s]);return n}({1:[function(t,e){e.exports=window.Note=t("./dev/noteFactory")},{"./dev/noteFactory":5}],2:[function(t,e){e.exports={test:function(t,e,i){return i.vol*sin(t*e)},"8bit":function(t,e){return 100*sin(t*e)},angle:function(t,e,i){return i.vol*sin(t*e)},tuningFork:function(t,e,i){return i.vol/1.2*(sin(t*e)+.2*sin(2*t*e))},piano:function(t,e,i){return i.vol/1.5*(sin(t*e)+.3*sin(2*t*e)+.2*sin(3*t*e))},guitar:function(t,e,i){return i.vol/2.2*(pow(sin(t*e),3)+.5*pow(sin(2*t*e),3)+.4*pow(sin(3*t*e),3)+.3*pow(sin(4*t*e),3))}}},{}],3:[function(t,e){e.exports=function(){var t=Math.PI,e=(Math.sin,Math.cos,Math.tan,Math.cot,Math.pow,Math.sqrt,Math.abs,"{{riffwave}}"),i="{{soundEffect}}",a="{{weak}}",n="{{sampleRate}}",r="{{bitsPerSample}}",s="{{blockAlign}}",o="{{numChannels}}",h="{{filterByte}}",d=function(e,r){for(var s,o,h=100,d=2*e*t/n,u=0,f={vol:h,f:e,T:e*n},c=new Uint8Array(r);u++<=r;)s=Math.round(i(d,u,f)),o=s,c[2*u]=s,c[2*u+1]=o,f.vol*=a;return c};onmessage=function(t){var i=t.data.f,a=t.data.note,u=t.data.len,f=(u||3)*n,c=d(i,f),l=new e;l.header.sampleRate=n,l.header.bitsPerSample=r,l.header.blockAlign=s,l.header.numChannels=o,l.header.filterByte=h,l.header.size=f,l.Make(c,function(t,e){postMessage({blob:t,url:e,len:u,note:a})})}}},{}],4:[function(t,e){var i=["C","#C","D","#D","E","F","#F","G","#G","A","#A","B"],a=function(t,e){var i,a,n=!1;e[e.length-1]===!0&&(n=!0),i=n?e[0]:{};for(var r=+n,s=e.length-n;s>r;r++)if(a=e[r],"object"==typeof a)for(var o in t?a:e[0])e[r].hasOwnProperty(o)&&(i[o]=a[o]);return i},n={Worker:function(){var t,e,i,a,n;return t=/function[^(]*\([^)]*\)\s*\{([\s\S]*)\}/,e=window.URL||window.webkitURL,i={type:"text/javascript; charset=utf-8"},function(r,s){var o=r.toString();for(var h in s)o=o.replace('"{{'+h+'}}"',s[h]);return a=o.match(t)[1],n=e.createObjectURL(new Blob([a],i)),new Worker(n)}}(),parse:function(){return a(0,arguments)},merge:function(){return a(1,arguments)},list:i,getFrequency:function(t,e){return s*Math.pow(r,n.translate(t+e)-o)},translate:function(t){var e,a;if("string"==typeof t){var r=n.parseNote(t);e=r[0],a=r[1];var s=i.indexOf(e);if(0>s)throw"translate note: "+e+" error";return 12*a+s+12}if("number"==typeof t)return t-=12,e=t%12,a=t/12|0,i[e]+a;throw"translate note: "+t+" error"},parseNote:function(t){var e,i=/(#?[A-Z])(-?[\d])/;if(e=i.exec(t),!e)throw"input error : "+t;return[e[1],e[2]]}},r=Math.pow(2,1/12)||1.06,s=440,o=n.translate("A4");e.exports=n},{}],5:[function(t,e){var i=t("./kit"),a=t("./factoryContent"),n=t("./riffwave"),r=function(t,e){return t+"_"+e},s=function(t){var e=this;this.config=i.parse({soundEffect:function(t,e,i){return i.vol*Math.sin(t*e)},duration:3,weak:.99985,sampleRate:44100,bitsPerSample:16,blockAlign:2,numChannels:2,filterByte:16},t),this._cache={},this._listener={},this.worker=i.Worker(a,{soundEffect:this.config.soundEffect.toString(),weak:this.config.weak,riffwave:n.toString(),sampleRate:this.config.sampleRate,bitsPerSample:this.config.bitsPerSample,blockAlign:this.config.blockAlign,numChannels:this.config.numChannels,filterByte:this.config.filterByte}),this.worker.onmessage=function(t){var i=t.data.note,a=t.data.len,n=t.data.url;e.cache(i,a,n),e._pub(i,a,n)}};s.prototype.get=function(t,e,a){"number"==typeof t&&(t=i.translate(t)),a=a||this.config.duration;var n=this.cache[t];return n?void e(n):(this.build(t,a),void this._sub(t,a,e))},s.prototype.cache=function(t,e,i){var a=r(t,e);return i?this._cache[a]=i:this._cache[a]},s.prototype.build=function(t,e){var a=i.parseNote(t),n=i.getFrequency(a[0],a[1]);this.worker.postMessage({f:n,note:t,len:e})},s.prototype._sub=function(t,e,i){var a=r(t,e);this._listener[a]||(this._listener[a]=[]),this._listener[a].push(i)},s.prototype._pub=function(t,e,i){var a=r(t,e),n=this._listener[a]||[];this._listener[a]=[];var s={noteFullName:t,duration:e};n.forEach(function(t){t(i,s)})},s.getFrequency=i.getFrequency,s.translate=i.translate,s.effect=t("./effect"),s.noteList=i.list,e.exports=s},{"./effect":2,"./factoryContent":3,"./kit":4,"./riffwave":6}],6:[function(t,e){function i(t){function e(t,e){for(var i=0,a=[];t--;)a.push(e>>8*i++&255);return a}this.mode=!!t,this.bitAdd=function(t){return this.dataBit+=t,t},this.header={RIFF_ID:[82,73,70,70],chunkSize:0,WAVE_ID:[87,65,86,69],FMT_ID:[102,109,116,32],filterByte:16,formatType:1,numChannels:2,sampleRate:44100,byteRate:0,blockAlign:0,bitsPerSample:8,fact_ID:[100,97,116,97],size:4},this.Make=function(t,i){var a=16==this.header.bitsPerSample?4:3;if(this.header.blockAlign=this.header.numChannels*this.header.bitsPerSample>>a,this.header.byteRate=this.header.blockAlign*this.header.sampleRate,this.header.size=t.length*(this.header.bitsPerSample>>a),this.header.chunkSize=36+this.header.size,this.dataBit=0,this.data=new Uint8Array(this.header.size*(a-2)+44),this.data.set(this.header.RIFF_ID,this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.chunkSize),this.dataBit),this.bitAdd(4),this.data.set(this.header.WAVE_ID,this.dataBit),this.bitAdd(4),this.data.set(this.header.FMT_ID,this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.filterByte),this.dataBit),this.bitAdd(4),this.data.set(e(2,this.header.formatType),this.dataBit),this.bitAdd(2),this.data.set(e(2,this.header.numChannels),this.dataBit),this.bitAdd(2),this.data.set(e(4,this.header.sampleRate),this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.byteRate),this.dataBit),this.bitAdd(4),this.data.set(e(2,this.header.blockAlign),this.dataBit),this.bitAdd(2),this.data.set(e(2,this.header.bitsPerSample),this.dataBit),this.bitAdd(2),this.data.set(this.header.fact_ID,this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.size),this.dataBit),this.bitAdd(4),4==a)for(var n=0,r=t.length;r>n;n++)this.data.set(e(2,t[n]).reverse(),this.dataBit),this.bitAdd(2);else this.data.set(t,this.dataBit);var s=new Blob([].concat(this.data),{type:"audio/wav"}),o=URL.createObjectURL(s);i&&i(s,o)}}window&&(window.RIFFWAVE=i),e.exports=i},{}]},{},[1]);