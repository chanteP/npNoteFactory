!function t(e,i,a){function r(s,h){if(!i[s]){if(!e[s]){var o="function"==typeof require&&require;if(!h&&o)return o(s,!0);if(n)return n(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var c=i[s]={exports:{}};e[s][0].call(c.exports,function(t){var i=e[s][1][t];return r(i?i:t)},c,c.exports,t,e,i,a)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<a.length;s++)r(a[s]);return r}({1:[function(t){window.noteFactory=t("./dev/noteFactory")},{"./dev/noteFactory":4}],2:[function(t,e){e.exports=function(){var t="{{riffwave}}",e="{{soundEffect}}",i="{{sampleRate}}",a="{{bitsPerSample}}",r="{{blockAlign}}",n="{{numChannels}}",s="{{filterByte}}",h=Math.PI,o=(Math.sin,Math.cos,Math.tan,Math.cot,Math.pow,Math.sqrt,Math.abs,function(t,a){for(var r,n,s=1,o=2*t*h/i,d=0,c={vol:s,f:t},f=new Uint8Array(a);d++<=a;)r=Math.round(e(o,d,c)),n=r,f[2*d]=r,f[2*d+1]=n,c.vol*=c.weak;return f});onmessage=function(e){var h=e.data.f,d=e.data.note,c=e.data.len,f=(c||3)*i,u=o(h,f),l=new t;l.header.sampleRate=i,l.header.bitsPerSample=a,l.header.blockAlign=r,l.header.numChannels=n,l.header.filterByte=s,l.header.size=f,l.Make(u,function(t){postMessage({base64:t,len:c,note:d})})}}},{}],3:[function(t,e){var i=["C","#C","D","#D","E","F","#F","G","#G","A","#A","B"],a=function(t,e){var i,a,r=!1;e[e.length-1]===!0&&(r=!0),i=r?e[0]:{};for(var n=+r,s=e.length-r;s>n;n++)if(a=e[n],"object"==typeof a)for(var h in t?a:e[0])e[n].hasOwnProperty(h)&&(i[h]=a[h]);return i},r=function(t,e){var a=i.indexOf(t);if(0>=a)throw"note "+t+"error";return 12*e+a},n=Math.pow(2,1/12),s=440,h=r("A",4),o={Worker:function(){var t,e,i,a,r;return t=/function[^(]*\([^)]*\)\s*\{([\s\S]*)\}/,e=window.URL||window.webkitURL,i={type:"text/javascript; charset=utf-8"},function(n,s){var h=n.toString();for(var o in s)h=h.replace('"{{'+o+'}}"',s[o]);return a=h.match(t)[1],r=window.opera?"data:application/javascript,"+encodeURIComponent(a):e.createObjectURL(new Blob([a],i)),new Worker(r)}}(),parse:function(){return a(0,arguments)},merge:function(){return a(1,arguments)},list:i,getFrequency:function(t,e){return s*Math.pow(n,r(t,e)-h)}};e.exports=o},{}],4:[function(t,e){var i=t("./kit"),a=t("./factoryContent"),r=t("./riffwave"),n=function(t,e){return t+"_"+e},s=function(t){var e=this;this.config=i.parse({soundEffect:function(t,e,i){var a=30/(2*PI);return i.vol*sin(t*e+a)+.2*i.vol*(sin(2*t*e+a)+sin(t/2*e+a))+.1*i.vol*(sin(4*t*e+a)+sin(t/4*e+a))},duration:3,weak:.99985,sampleRate:44100,bitsPerSample:16,blockAlign:2,numChannels:2,filterByte:16},t),this._cache={},this._listener={},this.worker=i.Worker(a,{soundEffect:this.config.soundEffect.toString(),weak:this.config.weak,riffwave:r.toString(),sampleRate:this.config.sampleRate,bitsPerSample:this.config.bitsPerSample,blockAlign:this.config.blockAlign,numChannels:this.config.numChannels,filterByte:this.config.filterByte}),this.worker.onmessage=function(t){var i=t.data.note,a=t.data.len,r=t.data.base64;e.cache(i,a,r),e._pub(i,a,r)}};s.prototype.get=function(t,e,i){i=i||this.config.duration;var a=this.cache[t];return a?void e(a):(this.build(t,i),void this._sub(t,i,e))},s.prototype.cache=function(t,e,i){var a=n(t,e);return i?this._cache[a]=i:this._cache[a]},s.prototype.build=function(t,e){var a,r=/([A-Z|#]{1, 2})([\d])/;if(a=r.exec(t)){var n=i.getFrequency(a[1],a[2]);this.worker.postMessage({f:n,note:t,len:e})}},s.prototype._sub=function(t,e,i){var a=n(t,e);this._listener[a]||(this._listener[a]=[]),this._listener[a].push(i)},s.prototype._pub=function(t,e,i){var a=n(t,e),r=this._listener[a]||[];this._listener[a]=[];var s={noteFullName:t,duration:e};r.forEach(function(t){t(i,s)})},e.exports=s},{"./factoryContent":2,"./kit":3,"./riffwave":5}],5:[function(t,e){function i(t){function e(t,e){for(var i=0,a=[];t--;)a.push(e>>8*i++&255);return a}this.mode=!!t,this.bitAdd=function(t){return this.dataBit+=t,t},this.header={RIFF_ID:[82,73,70,70],chunkSize:0,WAVE_ID:[87,65,86,69],FMT_ID:[102,109,116,32],filterByte:16,formatType:1,numChannels:2,sampleRate:44100,byteRate:0,blockAlign:0,bitsPerSample:8,fact_ID:[100,97,116,97],size:4},this.Make=function(t,i){var a=16==this.header.bitsPerSample?4:3;if(this.header.blockAlign=this.header.numChannels*this.header.bitsPerSample>>a,this.header.byteRate=this.header.blockAlign*this.header.sampleRate,this.header.size=t.length*(this.header.bitsPerSample>>a),this.header.chunkSize=36+this.header.size,this.dataBit=0,this.data=new Uint8Array(this.header.size*(a-2)+44),this.data.set(this.header.RIFF_ID,this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.chunkSize),this.dataBit),this.bitAdd(4),this.data.set(this.header.WAVE_ID,this.dataBit),this.bitAdd(4),this.data.set(this.header.FMT_ID,this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.filterByte),this.dataBit),this.bitAdd(4),this.data.set(e(2,this.header.formatType),this.dataBit),this.bitAdd(2),this.data.set(e(2,this.header.numChannels),this.dataBit),this.bitAdd(2),this.data.set(e(4,this.header.sampleRate),this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.byteRate),this.dataBit),this.bitAdd(4),this.data.set(e(2,this.header.blockAlign),this.dataBit),this.bitAdd(2),this.data.set(e(2,this.header.bitsPerSample),this.dataBit),this.bitAdd(2),this.data.set(this.header.fact_ID,this.dataBit),this.bitAdd(4),this.data.set(e(4,this.header.size),this.dataBit),this.bitAdd(4),4==a)for(var r=0,n=t.length;n>r;r++)this.data.set(e(2,t[r]).reverse(),this.dataBit),this.bitAdd(2);else this.data.set(t,this.dataBit);var s=new Blob([].concat(this.data),{type:"audio/wav"});if(this.mode){var h=URL.createObjectURL(s);i&&i(h)}else{var o=new FileReader;o.onload=function(){i&&i(this.result)},o.readAsDataURL(s)}}}e.exports=i},{}]},{},[1]);